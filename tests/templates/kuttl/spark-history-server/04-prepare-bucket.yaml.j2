---
apiVersion: kuttl.dev/v1beta1
kind: TestStep
commands:
  # give minio enough time to start
  - command: sleep 10
  - command: kubectl cp -n $NAMESPACE spark-examples_{{ test_scenario['values']['spark'].split(',')[0] }}.jar minio-client:/tmp/spark-examples.jar
  - command: kubectl exec -n $NAMESPACE minio-client -- mc --insecure alias set test-minio http://test-minio:9000 spark sparkspark
  - command: kubectl exec -n $NAMESPACE minio-client -- mc cp /tmp/spark-examples.jar test-minio/my-bucket
